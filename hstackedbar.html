<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <script src='d3.min.js'></script>
  <script src='colorbrewer.v1.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.js'></script>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title></title>
  <style>
    #barchart {
      width: 75vw;
      height: 50vh;
    }

    .d3-tip {
      line-height: 1;
      font-weight: bold;
      padding: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
      border-radius: 10px;
    }

    /* Settings for axes. */

    .axis path,
    .axis line {
      fill: none;
      stroke: black;
      stroke-width: 2px;
      shape-rendering: crispEdges;
    }

    .axis text {
      font-family: sans-serif;
      font-size: 0.6rem;
    }
  </style>
  <script>
    function draw(data) {

      // Turns all the strings in the csv into integer values.

      data.forEach(function(d) {
        d.Rifles = +d.Rifles;
        d.Pistols = +d.Pistols;
        d.Shotguns = +d.Shotguns;
        d.Revolvers = +d.Revolvers;
        d.Misc = +d.Misc;
        d.Total = +d.Total;
      });

      var width = document.getElementById('barchart').offsetWidth,
        height = document.getElementById('barchart').offsetHeight;

      var margin = {
        top: 20,
        right: 100,
        bottom: 20,
        left: 50
      };

      var svg = d3.select('barchart')
        .append('svg')
        .attr('width', '100%')
        .attr('height', '100%')
        .attr('viewBox', '0 0 ' + width + ' ' + height)
        .append('g');

      width = width - margin.left - margin.right,
        height = height - margin.top - margin.bottom;

      svg.attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    }
  </script>
</head>

<body>
  <div id='barchart'></div>
  <script>
    d3.csv('https://raw.githubusercontent.com/dieterholger/US-Gun-Manufacturing-Interactive/master/top10manufacturers.csv', draw);
  </script>
</body>

</html>
